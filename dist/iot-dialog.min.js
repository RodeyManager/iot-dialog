var iot;!function(t){function e(e){var i,s=e||{},o=s.id;return o?t._cache[o]?i=t._cache[o]:(i=new n(s),t._cache[o]=i):(o=Date.now()+"-"+999*Math.random(),s.id=o,i=new n(s),t._cache[o]=i),i}function i(e){var i=t._cache[e];return i&&i instanceof n?i:null}t._cache={},t._depth=3e3,t.dialog=e,t.getDialog=i;var n=function(){function e(t){this.ok={},this.cancel={},this._domIdPrefix="iot-dialog-",this._empty=function(){},this._eventType="ontouchstart"in window||window.TouchEvent?"touchend":"click",this.lock=!0;for(var e in t)this[e]=t[e];this._init()}return e.prototype.setOptions=function(t){for(var e in t)this[e]=t[e]},e.prototype.open=function(i,n){if(i){var s=t._cache[i];s&&s instanceof e&&(n&&s.setOptions(n),s.show())}else this.show()},e.prototype.close=function(i){if(i){var n=t._cache[i];n&&n instanceof e?n.hide():this.hide()}else this.hide()},e.prototype.setStyle=function(t,e){if(!t||""===t)return this;if("string"==typeof e)t.style=e;else if("object"==typeof e)for(var i in e)t.style[this._switchStyle(i)]=e[i];return this},e.prototype.setTitle=function(t){return t&&""!=t&&(this._titleDom.innerHTML=t),this},e.prototype.showTitle=function(t){void 0===t&&(t=!0);var e=t?"block":"none";return this._titleDom.style.display=e,this},e.prototype.setTitleStyle=function(t){return this.setStyle(this._titleDom,t)},e.prototype.setMessage=function(t){return t&&""!=t&&(this._contentDom.innerHTML=t),this},e.prototype.setMessageStyle=function(t){return this.setStyle(this._contentDom,t)},e.prototype.setButtonStyle=function(t){return this.setStyle(this._okBtn,t),this.setStyle(this._cancelBtn,t),this},e.prototype.setTime=function(t,e){var i=this;t&&0!==Number(t)&&(this.time=t,window.clearTimeout(this._stin),this._stin=window.setTimeout(function(){i._stin=null,i.hide(),e&&"function"==typeof e&&e.call(i)},1e3*this.time))},e.prototype.isLock=function(t){return this.lock=t,this.lock!==!0||this._maskDom?this._hideElement(this._maskDom):(this._createMask(),this._showElement(this._maskDom)),this},e.prototype.affirm=function(t,e){return this.ok.text=t,this.ok.callback=e,this._okBtn.innerHTML=t,this},e.prototype.shut=function(t,e){return this.cancel.text=t,this.cancel.callback=e,this._cancelBtn.innerHTML=t,this},e.prototype.show=function(){return this.lock&&this._maskDom&&this._showElement(this._maskDom),this._dom&&this._showElement(this._dom),this},e.prototype.hide=function(){return this._dom&&this._hideElement(this._dom),this._maskDom&&this._hideElement(this._maskDom),this},e.prototype.remove=function(){this._removeEvent(),this._dom&&this._dom.remove(),this._maskDom&&this._maskDom.remove(),t._cache[this.id]&&(t._cache[this.id]=null,delete t._cache[this.id])},e.prototype._init=function(){this._render()},e.prototype._render=function(){this.lock&&this._createMask(),!this._dom&&this._createContanier(),this.title&&this._createTitle(),this.message&&this._createContent(),this._createButton(),this._addEvent(),this.show(),this.time&&this.setTime(this.time)},e.prototype._createMask=function(){var t=this._addElement("div",document.body);t.setAttribute("class","iot-dialog-mask"),t.style.display="none",this._maskDom=t},e.prototype._createContanier=function(){if(!this.id){var e=Date.now()+"-"+999*Math.random();this.id=e}var i=document.createDocumentFragment(),n=this._addElement("div");n.setAttribute("class","iot-dialog"),n.setAttribute("id",this._domIdPrefix+this.id),n.style.zIndex=""+t._depth++,n.style.display="none",this.width&&(n.style.width="number"==typeof this.width?this.width+"px":this.width),this.height&&(n.style.height="number"==typeof this.height?this.height+"px":this.height),this._dom=n,i.appendChild(n),document.body.appendChild(i)},e.prototype._createTitle=function(){var t=this._addElement("h3");t.setAttribute("class","iot-dialog-title"),t.innerHTML=this.title||"",this._titleDom=t,this._dom.appendChild(t)},e.prototype._createContent=function(){var t=this._addElement("div");t.setAttribute("class","iot-dialog-content"),t.innerHTML=this.message||"",this._contentDom=t,this._dom.appendChild(t)},e.prototype._createButton=function(){var t=this._addElement("div");if(t.setAttribute("class","iot-dialog-btn-con"),this._dom.appendChild(t),this.cancel&&0!==Object.keys(this.cancel).length&&!this._cancelBtn){var e=this._addElement("span",t);e.setAttribute("class","iot-dialog-btn cancel"),e.innerHTML=this.cancel.text,this._cancelBtn=e}if(this.ok&&0!==Object.keys(this.ok).length&&!this._okBtn){var e=this._addElement("span",t);e.setAttribute("class","iot-dialog-btn ok"),e.innerHTML=this.ok.text,this._okBtn=e}},e.prototype._addEvent=function(){var t=this._eventType;this._okBtn&&this._okBtn.addEventListener(t,this._okEventHandler.bind(this),!1),this._cancelBtn&&this._cancelBtn.addEventListener(t,this._cancelEventHandler.bind(this),!1)},e.prototype._removeEvent=function(){var t=this._eventType;this._okBtn&&this._okBtn.removeEventListener(t,this._okEventHandler.bind(this),!1),this._cancelBtn&&this._cancelBtn.removeEventListener(t,this._cancelEventHandler.bind(this),!1)},e.prototype._okEventHandler=function(t){if(this.ok.callback){var e=this.ok.callback.call(this);e!==!1&&this.close()}},e.prototype._cancelEventHandler=function(t){if(this.cancel.callback){var e=this.cancel.callback.call(this);e!==!1&&this.close()}else this.close()},e.prototype._addElement=function(t,e){var i=document.createElement(t);return e&&e.appendChild(i),i},e.prototype._showElement=function(t){t.style.display="block"},e.prototype._hideElement=function(t){t.style.display="none"},e.prototype._switchStyle=function(t){var e,i=new RegExp("[\\s\\S]*?(-[\\w]?)[\\s\\S]*?","gi"),n=i.exec(t),s=n[1];return i.lastIndex=0,s&&(e=s.replace(/-/gi,"").toUpperCase()),t.replace(s,e)},e}();t.Dialog=n}(iot||(iot={}));